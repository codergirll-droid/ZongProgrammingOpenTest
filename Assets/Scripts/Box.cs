using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class Box : MonoBehaviour, IBox
{
    public ScriptableObjects boxData;
    bool didInteract = false;

    InventoryManager _inventoryManager;
    UIController _uiController;

    private void Start()
    {
        _inventoryManager = InventoryManager.Instance;
        _uiController = UIController.Instance;
    }

    public void DropObject()
    {
        //cant drop
    }


    public void EquipObject()
    {
        //cant equip
    }

    public void PickUpObject()
    {
        //cant pickup
    }

    public void DropObjectInside()
    {
        if (!didInteract)
        {
            

            if (boxData.objectType == ScriptableObjects.ObjectType.BOX_EFFECT)
            {
                if (_inventoryManager.ContainsInstruments())
                {
                    didInteract = true;
                    Instantiate(boxData.particlesPrefab, this.transform.position, Quaternion.identity);
                    //get the last element on the instruments list and update ui then delete it
                    _uiController.UpdateFeedbackText("Dropped " + _inventoryManager.GetFirstInstrument().objectName, 3);
                    _inventoryManager.DeleteFirstInstrument();
                }
                else
                {
                    _uiController.UpdateFeedbackText("No instruments found, find some instruments first.", 3);

                }


            }
            else if (boxData.objectType == ScriptableObjects.ObjectType.BOX_CHECKPOINT)
            {
                // send the player to a certain checkpoint
            }
        }

    }

    public ScriptableObjects GetData()
    {
        return boxData;
    }
}
