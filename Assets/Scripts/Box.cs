using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class Box : MonoBehaviour, IBox
{
    public ScriptableObjects boxData;

    InventoryManager _inventoryManager;
    UIController _uiController;
    SoundManager _soundManager;

    private void Start()
    {
        _inventoryManager = InventoryManager.Instance;
        _uiController = UIController.Instance;
        _soundManager = SoundManager.Instance;
    }

    public void DropObject()
    {
        //cant drop
    }


    public void EquipObject()
    {
        //cant equip
    }

    public void PickUpObject()
    {
        //cant pickup
    }

    public void DropObjectInside()
    {
        if (boxData.objectType == ScriptableObjects.ObjectType.BOX_EFFECT)
        {
            if (_inventoryManager.ContainsInstruments())
            {
                Instantiate(boxData.particlesPrefab, this.transform.position, Quaternion.LookRotation(Vector3.up));
                _uiController.UpdateFeedbackText("You have dropped " + _inventoryManager.GetFirstInstrument().objectName
                    + " in " + boxData.objectName,
                     3);
                _inventoryManager.DeleteFirstInstrument();
                _soundManager.PlaySoundEffect(boxData.objectInteractionAudioClip);
            }
            else
            {
                _uiController.UpdateFeedbackText("No instruments found, find some instruments first.", 3);

            }


        }
        else if (boxData.objectType == ScriptableObjects.ObjectType.BOX_CHECKPOINT)
        {
            if (_inventoryManager.ContainsInstruments())
            {
                _soundManager.PlaySoundEffect(boxData.objectInteractionAudioClip);
                _inventoryManager.LoadPlayerData();
            }
            else
            {
                _uiController.UpdateFeedbackText("No instruments found, find some instruments first.", 3);
            }
        }

    }

    public ScriptableObjects GetData()
    {
        return boxData;
    }
}
